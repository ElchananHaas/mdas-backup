<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>

<meta name="google-site-verification" content="CjkdY6BqKWAVmQ78_iSq6J7ZZ9AoL7-CjFVBYGg9FU4" />
<link rel="shortcut icon" href="/custom/favicon.ico" type="image/ico" />
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" />
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/custom/js/sorttable.js"></script>
<script type="text/javascript" src="/custom/libraries/jquery.min.js"></script>                         
<script type="text/javascript" src="/custom/js/seesaw.js"></script> 
<script type="text/javascript" src="/custom/js/rosversion.js"></script> 
<!--script type="text/javascript" src="/custom/libraries/RGraph.common.core.js" ></script Used for metrics only, should be conditional, not at the top-->
<!--script type="text/javascript" src="/custom/libraries/RGraph.bar.js" ></script same as above -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17821189-2']);
  _gaq.push(['_setDomainName', 'wiki.ros.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var o=n[t]={exports:{}};e[t][0].call(o.exports,function(n){var o=e[t][1][n];return r(o||n)},o,o.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<t.length;o++)r(t[o]);return r}({1:[function(e,n,t){function r(){}function o(e,n,t){return function(){return i(e,[c.now()].concat(u(arguments)),n?null:this,t),n?void 0:this}}var i=e("handle"),a=e(2),u=e(3),f=e("ee").get("tracer"),c=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(e,n){s[n]=o(d+n,!0,"api")}),s.addPageAction=o(d+"addPageAction",!0),s.setCurrentRouteName=o(d+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,o="function"==typeof n;return i(l+"tracer",[c.now(),e,t],r),function(){if(f.emit((o?"":"no-")+"fn-start",[c.now(),r,o],t),o)try{return n.apply(this,arguments)}finally{f.emit("fn-end",[c.now()],t)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=o(l+n)}),newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),i("err",[e,c.now()])}},{}],2:[function(e,n,t){function r(e,n){var t=[],r="",i=0;for(r in e)o.call(e,r)&&(t[i]=n(r,e[r]),i+=1);return t}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],3:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,i=Array(o<0?0:o);++r<o;)i[r]=e[n+r];return i}n.exports=r},{}],4:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function o(e){function n(e){return e&&e instanceof r?e:e?f(e,u,i):i()}function t(t,r,o,i){if(!d.aborted||i){e&&e(t,r,o);for(var a=n(o),u=m(t),f=u.length,c=0;c<f;c++)u[c].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function l(e,n){v[e]=m(e).concat(n)}function m(e){return v[e]||[]}function w(e){return p[e]=p[e]||o(t)}function g(e,n){c(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var v={},y={},b={on:l,emit:t,get:w,listeners:m,context:n,buffer:g,abort:a,aborted:!1};return b}function i(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var u="nr@context",f=e("gos"),c=e(2),s={},p={},d=n.exports=o();d.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(o.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){o.buffer([e],r),o.emit(e,n,t)}var o=e("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=h.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();c(y,function(n,t){e[n]||(e[n]=t)}),f("mark",["onload",a()+h.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function o(){"complete"===d.readyState&&i()}function i(){f("mark",["domContent",a()+h.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(u=Math.max((new Date).getTime(),u))-h.offset}var u=(new Date).getTime(),f=e("handle"),c=e(2),s=e("ee"),p=window,d=p.document,l="addEventListener",m="attachEvent",w=p.XMLHttpRequest,g=w&&w.prototype;NREUM.o={ST:setTimeout,SI:p.setImmediate,CT:clearTimeout,XHR:w,REQ:p.Request,EV:p.Event,PR:p.Promise,MO:p.MutationObserver};var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1044.min.js"},b=w&&g&&g[l]&&!/CriOS/.test(navigator.userAgent),h=n.exports={offset:u,now:a,origin:v,features:{},xhrWrappable:b};e(1),d[l]?(d[l]("DOMContentLoaded",i,!1),p[l]("load",r,!1)):(d[m]("onreadystatechange",o),p[m]("onload",r)),f("mark",["firstbyte",u],null,"api");var x=0,E=e(4)},{}]},{},["loader"]);</script><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","queueTime":0,"licenseKey":"4c8610d177","agent":"","transactionName":"NFZaMEVUV0ZVBkBeCQ0cbRZeGktaRwdVUElJ","applicationID":"3371695","errorBeacon":"bam.nr-data.net","applicationTime":180}</script>
<meta name="robots" content="index,nofollow">

<title>rosbag/Tutorials/Recording and playing back data - ROS Wiki</title>
<script type="text/javascript" src="/moin_static197/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static197/rostheme/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="/moin_static197/rostheme/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="/moin_static197/rostheme/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="/moin_static197/rostheme/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static197/rostheme/css/msie.css">
<![endif]-->




<link rel="canonical" href="http://wiki.ros.org/rosbag/Tutorials/Recording%20and%20playing%20back%20data" />

<link rel="Start" href="/Documentation">
<link rel="Alternate" title="Wiki Markup" href="/rosbag/Tutorials/Recording%20and%20playing%20back%20data?action=raw">
<link rel="Alternate" media="print" title="Print View" href="/rosbag/Tutorials/Recording%20and%20playing%20back%20data?action=print">
<link rel="Up" href="/rosbag/Tutorials">
<link rel="Appendix" title="jagged.png" href="/rosbag/Tutorials/Recording%20and%20playing%20back%20data?action=AttachFile&amp;do=view&amp;target=jagged.png">
<link rel="Appendix" title="left.png" href="/rosbag/Tutorials/Recording%20and%20playing%20back%20data?action=AttachFile&amp;do=view&amp;target=left.png">
<link rel="Search" href="/FindPage">
<link rel="Index" href="/TitleIndex">
<link rel="Glossary" href="/WordIndex">
<link rel="Help" href="/HelpOnFormatting">
</head>

<body  lang="en" dir="ltr">

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-5950817-2");
pageTracker._trackPageview();
} catch(err) {}</script>

<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
if(f) f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
if(e) {
  searchChange(e);
  searchBlur(e);
}

function handleSubmit() {
  var f = document.getElementById('searchform');
  var t = document.getElementById('searchinput');
  var r = document.getElementById('real_searchinput');

  //alert("handleSubmit "+ t.value);
  if(t.value.match(/review/)) {
    r.value = t.value;
  } else {
    //r.value = t.value + " -PackageReviewCategory -StackReviewCategory -M3Review -DocReview -ApiReview -HelpOn -BadContent -LocalSpellingWords";
    r.value = t.value + " -PackageReviewCategory -StackReviewCategory -DocReview -ApiReview";
  }
  //return validate(f);
}
//-->
</script>

<div id="dpage">
  <div id="dpage-inner">
    <div id="header"><div id="topnav">

<!-- Alert box -->
<!-- To enable/disable the alert box, uncomment/comment the block below and update the content below the button. -->
<!--
    <div class="alert alert-info alert-dismissable" style="text-align: center;">
<script>
jQuery(function( $ ){
    alert_box_name = 'roswiki_roscon'
    state = localStorage.getItem(alert_box_name);
    if (!state) {
      localStorage.setItem(alert_box_name, 'open');
    }
    state = localStorage.getItem(alert_box_name);
    if (state == 'closed') {
        $( '#topnav .alert' ).hide();
    }
    $( '.close' ).click(function () {
	console.log('in .close.click');
        localStorage.setItem(alert_box_name, 'closed');
        $( '#topnav .alert' ).hide();
  });
});
</script>
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
      <a href="http://roscon.ros.org">ROSCon 2017</a> will be in Vancouver, September 21-22! <br>
      The last few years have sold out: register now and take advantage of discounted hotel rates</a>.
    </div>
-->
<!-- End Alert box -->

      <table id="topnav-table">
        <tr>
          <td width="300" valign="top"><a href="/"><img border="0" src="/custom/images/ros_org.png" alt="ros.org" width="238" height="51"/></a></td>
          <td width="500" valign="middle">
            <a href="http://www.ros.org/about-ros">About</a>
            |
            <a href="/Support">Support</a>
            |
            <a href="http://discourse.ros.org/">Discussion Forum</a>
            |
            <a href="http://status.ros.org/">Service Status</a>
            |
            <a href="http://answers.ros.org/">Q&A answers.ros.org</a>

<!--<a href="http://roscon.ros.org/2016/"><img align="middle" style="padding-left: 15px;" src="http://ros.org/images/roscon_wiki_header.jpg" width="133" height="65" alt="ROSCon 2016" /></a>
-->

<!-- <a href="https://events.osrfoundation.org/ros-kong-2014/"><img align="middle" style="padding-left: 15px;" src="http://ros.org/images/ros_kong_2014_badge.png" width="133" height="38" alt="roskong" /></a>
-->
<!--a href="https://events.osrfoundation.org/ros-kong-2014/"><img align="middle" style="padding-left: 15px;" src="http://imgur.com/eMzUJVe.png" width="133" height="38" alt="roskong" /></a-->
          </td>

          <td valign="middle" align="right">

<script language="Javascript">

function Searchy(theButton){

theForm = theButton.form;
newID = theForm.input.value;
theForm.q.value = newID;
theForm.input.value=theForm.input.value

}
</script>


<form action="http://www.ros.org/search/index.html" id="cse">
  <div>
    <label>Search:</label>
    <input type="hidden" name="cx" value="018259903093183594226:txvzw9fat6w" />
    <input type="hidden" name="cof" value="FORID:11;NB:1" />
    <input type="hidden" name="filter" value="0" />
    <input type="hidden" name="num" value="10" />

    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="input" id="input" autocomplete="on" style="width: 35%"/>
    <input type="hidden" name="q" value="" />
    <input type="submit" name="sa" value="Submit" onClick="Searchy(this)"/>

  </div>
</form>

         </td>
      </tr>
      <tr>
        <td colspan="3" height="53" width="1024"><nobr><img src="/custom/images/menu_left.png" width="17" height="53" alt=""/><a href="/"><img
        border="0" src="/custom/images/menu_documentation.png" width="237" height="53" alt="Documentation" /></a><img
        src="/custom/images/menu_spacer.png" width="69" height="53" /><a href="http://www.ros.org/browse/"><img border="0"
        src="/custom/images/menu_browse_software.png" width="268" height="53" alt="Browse Software" /></a><img
        src="/custom/images/menu_spacer.png" width="69" height="53" /><a href="http://www.ros.org/news"><img border="0"
        src="/custom/images/menu_news.png" width="84" height="53" alt="News" /></a><img
        src="/custom/images/menu_spacer.png" width="69" height="53" /><a href="/ROS/Installation"><img border="0"
        src="/custom/images/menu_download.png" width="151" height="53" alt="Download" /></a><img
        src="/custom/images/menu_right.png" width="60" height="53" /></nobr></td>

      </tr>
    </table> <!-- topnav-table -->

    </div> <!-- /#topav -->
  </div> <!-- /#header -->


<div id="header2">

<ul id="pagelocation">
<li><a href="/rosbag">rosbag</a></li><li><a href="/rosbag/Tutorials">Tutorials</a></li><li><a class="backlink" href="/action/fullsearch/rosbag/Tutorials/Recording%20and%20playing%20back%20data?action=fullsearch&amp;context=180&amp;value=linkto%3A%22rosbag%2FTutorials%2FRecording+and+playing+back+data%22" rel="nofollow" title="Click to do a full-text search for this title">Recording and playing back data</a></li>
</ul>

<div id="locationline">
</div>
</div>

<div id="sidebar">
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="/Distributions">Distributions</a></li><li class="wikilink"><a href="/ROS/Installation">ROS/Installation</a></li><li class="wikilink"><a href="/ROS/Tutorials">ROS/Tutorials</a></li><li class="wikilink"><a href="/RecentChanges">RecentChanges</a></li><li class="current"><a href="/rosbag/Tutorials/Recording%20and%20playing%20back%20data">Recording a...g back data</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>Page</h1>
<ul class="editbar"><li><span class="disabled">Immutable Page</span></li><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbinfo" href="/action/info/rosbag/Tutorials/Recording%20and%20playing%20back%20data?action=info" rel="nofollow">Info</a></li><li><a class="nbattachments" href="/action/AttachFile/rosbag/Tutorials/Recording%20and%20playing%20back%20data?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="/rosbag/Tutorials/Recording%20and%20playing%20back%20data">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="show" disabled class="disabled">Delete Cache</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="CopyPage">Copy Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="MyPages">My Pages</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
<option value="PackagePages">Package Pages</option>
<option value="SyncPages">Sync Pages</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="CreatePdfDocument">CreatePdfDocument</option>
<option value="Load">Load</option>
<option value="RawFile">RawFile</option>
<option value="Save">Save</option>
<option value="SlideShow">SlideShow</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="/action/login/rosbag/Tutorials/Recording%20and%20playing%20back%20data?action=login" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" lang="en" dir="ltr">

<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><p class="line867"><span class="anchor" id="line-1-1"></span><span class="anchor" id="line-2-1"></span><div><table><tbody><tr>  <td style="background-color: #cce0ff"><strong>Note:</strong> This tutorial assumes that you have completed the previous tutorials:   <a href="/ROS/Tutorials/UnderstandingNodes">Understanding ROS Nodes</a>. </td>
</tr>
</tbody></table></div><span class="anchor" id="line-3-1"></span><span class="anchor" id="line-4-1"></span><span class="anchor" id="line-5-1"></span><span class="anchor" id="line-6-1"></span><div><table><tbody><tr>  <td style="background-color: #bbceee"> <img alt="(!)" height="15" src="/moin_static197/rostheme/img/idea.png" title="(!)" width="15" /> Please ask about problems and questions regarding this tutorial on <a class="http" href="http://answers.ros.org">answers.ros.org</a>. Don't forget to include in your question the link to this page, the versions of your OS &amp; ROS, and also add appropriate tags.</td>
</tr>
</tbody></table></div><span class="anchor" id="line-7-1"></span><span class="anchor" id="line-8-1"></span><span class="anchor" id="line-9-1"></span>
<h1 id="Recording_and_playing_back_data">Recording and playing back data</h1>
<span class="anchor" id="line-10-1"></span><strong>Description:</strong> This tutorial will teach you how to record data from a running ROS system into a .bag file, and then to play back the data to produce similar behavior in a running system<br>
<br>
 <span class="anchor" id="line-11-1"></span><span class="anchor" id="line-12-1"></span><span class="anchor" id="line-13-1"></span><strong>Keywords:</strong> data, rosbag, record, play, info, bag<br>
<br>
 <span class="anchor" id="line-14-1"></span><span class="anchor" id="line-15-1"></span><span class="anchor" id="line-16-1"></span><strong>Tutorial Level:</strong> BEGINNER<br>
 <br>
 <span class="anchor" id="line-17-1"></span><span class="anchor" id="line-18-1"></span><span class="anchor" id="line-19-1"></span><p class="line874"> <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#Recording_data_.28creating_a_bag_file.29">Recording data (creating a bag file)</a><ol><li>
<a href="#Recording_all_published_topics">Recording all published topics</a></li></ol></li><li>
<a href="#Examining_and_playing_the_bag_file">Examining and playing the bag file</a></li><li>
<a href="#Recording_a_subset_of_the_data">Recording a subset of the data</a></li><li>
<a href="#The_limitations_of_rosbag_record.2BAC8-play">The limitations of rosbag record/play</a></li></ol></li></ol></div><p class="line874"> <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><p class="line867">
<h2 id="Recording_data_.28creating_a_bag_file.29">Recording data (creating a bag file)</h2>
<span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><p class="line874">This section of the tutorial will instruct you how to record topic data from a running ROS system.  The topic data will be accumulated in a bag file. <span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><p class="line874">First, execute the following commands in separate terminals: <span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><p class="line867"><span class="u">Terminal 1:</span> <span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><pre><span class="anchor" id="line-1-2"></span>roscore</pre><span class="anchor" id="line-36"></span><p class="line867"><span class="u">Terminal 2:</span> <span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><pre><span class="anchor" id="line-1-3"></span>rosrun turtlesim turtlesim_node </pre><span class="anchor" id="line-40"></span><p class="line867"><span class="u">Terminal 3:</span> <span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><pre><span class="anchor" id="line-1-4"></span>rosrun turtlesim turtle_teleop_key</pre><span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><p class="line874">This will start two nodes - the turtlesim visualizer and a node that allows for the keyboard control of turtlesim using the arrows keys on the keyboard.  If you select the terminal window from which you launched turtle_keyboard, you should see something like the following: <span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><p class="line867"><span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><pre><span class="anchor" id="line-1-5"></span>Reading from keyboard
<span class="anchor" id="line-2-2"></span>---------------------------
<span class="anchor" id="line-3-2"></span>Use arrow keys to move the turtle.</pre><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><p class="line874">Pressing the arrow keys on the keyboard should cause the turtle to move around the screen.  Note that to move the turtle you must have the terminal from which you launched turtlesim selected and not the turtlesim window.    <span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><p class="line867">
<h3 id="Recording_all_published_topics">Recording all published topics</h3>
<span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><p class="line874">First lets examine the full list of topics that are currently being published in the running system.  To do this, open a new terminal and execute the command: <span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><p class="line867"><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><pre><span class="anchor" id="line-1-6"></span>rostopic list -v</pre><span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><p class="line874">This should yield the following output: <span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><p class="line867"><span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><pre><span class="anchor" id="line-1-7"></span>Published topics:
<span class="anchor" id="line-2-3"></span> * /turtle1/color_sensor [turtlesim/Color] 1 publisher
<span class="anchor" id="line-3-3"></span> * /turtle1/cmd_vel [geometry_msgs/Twist] 1 publisher
<span class="anchor" id="line-4-2"></span> * /rosout [rosgraph_msgs/Log] 2 publishers
<span class="anchor" id="line-5-2"></span> * /rosout_agg [rosgraph_msgs/Log] 1 publisher
<span class="anchor" id="line-6-2"></span> * /turtle1/pose [turtlesim/Pose] 1 publisher
<span class="anchor" id="line-7-2"></span>
<span class="anchor" id="line-8-2"></span>Subscribed topics:
<span class="anchor" id="line-9-2"></span> * /turtle1/cmd_vel [geometry_msgs/Twist] 1 subscriber
<span class="anchor" id="line-10-2"></span> * /rosout [rosgraph_msgs/Log] 1 subscriber</pre><span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span><p class="line874">The list of published topics are the only message types that could potentially be recorded in the data log file, as only published messages are recorded. The topic /turtle1/cmd_vel is the command message published by teleop_turtle that is taken as input by the turtlesim process.  The messages /turtle1/color_sensor and /turtle1/pose are output messages published by turtlesim. <span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span><p class="line874">We now will record the published data. Open a new terminal window.  In this window run the following commands: <span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span><p class="line867"><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><pre><span class="anchor" id="line-1-8"></span>mkdir ~/bagfiles
<span class="anchor" id="line-2-4"></span>cd ~/bagfiles
<span class="anchor" id="line-3-4"></span>rosbag record -a</pre><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><p class="line862">Here we are just making a temporary directory to record data and then running <strong>rosbag record</strong> with the option -a, indicating that all published topics should be accumulated in a bag file. <span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><p class="line874">Move back to the terminal window with turtle_teleop and move the turtle around for 10 or so seconds.   <span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><p class="line862">In the window running rosbag record exit with a Ctrl-C.  Now examine the contents of the directory ~/bagfiles.  You should see a file with a name that begins with the year, date, and time and the suffix .bag.  This is the bag file that contains all topics published by any node in the time that <strong>rosbag record</strong> was running. <span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><p class="line867">
<h2 id="Examining_and_playing_the_bag_file">Examining and playing the bag file</h2>
<span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><p class="line862">Now that we've recorded a bag file using <strong>rosbag record</strong> we can examine it and play it back using the commands <strong>rosbag info</strong> and <strong>rosbag play</strong>.  First we are going to see what's recorded in the bag file.  We can do the <strong>info</strong> command -- this command checks the contents of the bag file without playing it back.  Execute the following command from the bagfiles directory: <span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><pre><span class="anchor" id="line-1-9"></span>rosbag info &lt;your bagfile&gt;</pre><span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><p class="line874">You should see something like: <span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span><p class="line867"><span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span><span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><pre><span class="anchor" id="line-1-10"></span>path:        2014-12-10-20-08-34.bag
<span class="anchor" id="line-2-5"></span>version:     2.0
<span class="anchor" id="line-3-5"></span>duration:    1:38s (98s)
<span class="anchor" id="line-4-3"></span>start:       Dec 10 2014 20:08:35.83 (1418270915.83)
<span class="anchor" id="line-5-3"></span>end:         Dec 10 2014 20:10:14.38 (1418271014.38)
<span class="anchor" id="line-6-3"></span>size:        865.0 KB
<span class="anchor" id="line-7-3"></span>messages:    12471
<span class="anchor" id="line-8-3"></span>compression: none [1/1 chunks]
<span class="anchor" id="line-9-3"></span>types:       geometry_msgs/Twist [9f195f881246fdfa2798d1d3eebca84a]
<span class="anchor" id="line-10-3"></span>             rosgraph_msgs/Log   [acffd30cd6b6de30f120938c17c593fb]
<span class="anchor" id="line-11-2"></span>             turtlesim/Color     [353891e354491c51aabe32df673fb446]
<span class="anchor" id="line-12-2"></span>             turtlesim/Pose      [863b248d5016ca62ea2e895ae5265cf9]
<span class="anchor" id="line-13-2"></span>topics:      /rosout                    4 msgs    : rosgraph_msgs/Log   (2 connections)
<span class="anchor" id="line-14-2"></span>             /turtle1/cmd_vel         169 msgs    : geometry_msgs/Twist
<span class="anchor" id="line-15-2"></span>             /turtle1/color_sensor   6149 msgs    : turtlesim/Color    
<span class="anchor" id="line-16-2"></span>             /turtle1/pose           6149 msgs    : turtlesim/Pose</pre><span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><p class="line862">This tells us topic names and types as well as the number (count) of each message topic contained in the bag file.  We can see that of the topics being advertised that we saw in the <strong>rostopic</strong> output, four of the five were actually published over our recording interval.  As we ran <strong>rosbag record</strong> with the -a flag it recorded all messages published by all nodes.    <span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><p class="line874">The next step in this tutorial is to replay the bag file to reproduce behavior in the running system.  First kill the teleop program that may be still running from the previous section - a Ctrl-C in the terminal where you started turtle_teleop_key. Leave turtlesim running.   In a terminal window run the following command in the directory where you took the original bag file: <span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><p class="line867"><span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><pre><span class="anchor" id="line-1-11"></span>rosbag play &lt;your bagfile&gt;</pre><span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><p class="line874">In this window you should immediately see something like: <span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><p class="line867"><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><pre><span class="anchor" id="line-1-12"></span>[ INFO] [1418271315.162885976]: Opening 2014-12-10-20-08-34.bag
<span class="anchor" id="line-2-6"></span>
<span class="anchor" id="line-3-6"></span>Waiting 0.2 seconds after advertising topics... done.
<span class="anchor" id="line-4-4"></span>
<span class="anchor" id="line-5-4"></span>Hit space to toggle paused, or 's' to step.</pre><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><p class="line862">In its default mode rosbag play will wait for a certain period (.2 seconds) after advertising each message before it actually begins publishing the contents of the bag file.  Waiting for some duration allows any subscriber of a message to be alerted that the message has been advertised and that messages may follow.  If <strong>rosbag play</strong> publishes messages immediately upon advertising, subscribers may not receive the first several published messages.  The waiting period can be specified with the -d option. <span class="anchor" id="line-142"></span><span class="anchor" id="line-143"></span><p class="line862">Eventually the topic /turtle1/cmd_vel will be published and the turtle should start moving in turtlesim in a pattern similar to the one you executed from the teleop program.  The duration between running <strong>rosbag play</strong> and the turtle moving should be approximately equal to the time between the original <strong>rosbag record</strong> execution and issuing the commands from the keyboard in the beginning part of the tutorial.  You can have <strong>rosbag play</strong> not start at the beginning of the bag file but instead start some duration past the beginning using the -s argument.  A final option that may be of interest is the -r option, which allows you to change the rate of publishing by a specified factor.  If you execute: <span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span><p class="line867"><span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span><pre><span class="anchor" id="line-1-13"></span>rosbag play -r 2 &lt;your bagfile&gt;</pre><p class="line874"> <span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span><p class="line874">You should see the turtle execute a slightly different trajectory - this is the trajectory that would have resulted had you issued your keyboard commands twice as fast. <span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span><p class="line867">
<h2 id="Recording_a_subset_of_the_data">Recording a subset of the data</h2>
<span class="anchor" id="line-152"></span><span class="anchor" id="line-153"></span><p class="line862">When running a complicated system, such as the pr2 software suite, there may be hundreds of topics being published, with some topics, like camera image streams, potentially publishing huge amounts of data.  In such a system it is often impractical to write log files consisting of all topics to disk in a single bag file.  The <strong>rosbag record</strong> command supports logging only particular topics to a bag file, allowing a user to only record the topics of interest to them. <span class="anchor" id="line-154"></span><span class="anchor" id="line-155"></span><p class="line874">If any turtlesim nodes are running exit them and relaunch the keyboard teleop launch file: <span class="anchor" id="line-156"></span><span class="anchor" id="line-157"></span><p class="line867"><span class="anchor" id="line-158"></span><span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><pre><span class="anchor" id="line-1-14"></span>rosrun turtlesim turtlesim_node 
<span class="anchor" id="line-2-7"></span>rosrun turtlesim turtle_teleop_key</pre><span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span><p class="line874">In your bagfiles directory, run the following command: <span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><p class="line867"><span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span><pre><span class="anchor" id="line-1-15"></span>rosbag record -O subset /turtle1/cmd_vel /turtle1/pose</pre><span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><p class="line862">The -O argument tells <strong>rosbag record</strong> to log to a file named subset.bag, and the topic arguments cause <strong>rosbag record</strong> to only subscribe to these two topics.  Move the turtle around for several seconds using the keyboard arrow commands, and then Ctrl-C the <strong>rosbag record</strong>. <span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span><p class="line862">Now check the contents of the bag file (<strong>rosbag info subset.bag</strong>).  You should see something like this, with only the indicated topics: <span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span><p class="line867"><span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span><span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span><span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><pre><span class="anchor" id="line-1-16"></span>path:        subset.bag
<span class="anchor" id="line-2-8"></span>version:     2.0
<span class="anchor" id="line-3-7"></span>duration:    12.6s
<span class="anchor" id="line-4-5"></span>start:       Dec 10 2014 20:20:49.45 (1418271649.45)
<span class="anchor" id="line-5-5"></span>end:         Dec 10 2014 20:21:02.07 (1418271662.07)
<span class="anchor" id="line-6-4"></span>size:        68.3 KB
<span class="anchor" id="line-7-4"></span>messages:    813
<span class="anchor" id="line-8-4"></span>compression: none [1/1 chunks]
<span class="anchor" id="line-9-4"></span>types:       geometry_msgs/Twist [9f195f881246fdfa2798d1d3eebca84a]
<span class="anchor" id="line-10-4"></span>             turtlesim/Pose      [863b248d5016ca62ea2e895ae5265cf9]
<span class="anchor" id="line-11-3"></span>topics:      /turtle1/cmd_vel    23 msgs    : geometry_msgs/Twist
<span class="anchor" id="line-12-3"></span>             /turtle1/pose      790 msgs    : turtlesim/Pose</pre><span class="anchor" id="line-186"></span><p class="line867">
<h2 id="The_limitations_of_rosbag_record.2BAC8-play">The limitations of rosbag record/play</h2>
<span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><p class="line874">In the previous section you may have noted that the turtle's path may not have exactly mapped to the original keyboard input - the rough shape should have been the same, but the turtle may not have exactly tracked the same path.  The reason for this is that the path tracked by turtlesim is very sensitive to small changes in timing in the system, and rosbag is limited in its ability to exactly duplicate the behavior of a running system in terms of when messages are recorded and processed by rosrecord, and when messages are produced and processed when using rosplay.  For nodes like turtlesim, where minor timing changes in when command messages are processed can subtly alter behavior, the user should not expect perfectly mimicked behavior. <span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><p class="line867"><span class="anchor" id="line-191"></span><p class="line867"><span class="anchor" id="line-192"></span><p class="line867"><span class="anchor" id="line-193"></span><span class="anchor" id="bottom"></span></div></div>
<div id="pagebottom"></div>
</div>

<p id="pageinfo" class="info" lang="en" dir="ltr">Wiki: rosbag/Tutorials/Recording and playing back data  (last edited 2017-05-22 23:29:47 by <span title="Marguedas @ 70-35-50-58.static.wiline.com[70.35.50.58]"><a class="nonexistent" href="/Marguedas" title="Marguedas @ 70-35-50-58.static.wiline.com[70.35.50.58]">Marguedas</a></span>)</p>




<div style="margin-top: 9px;" class="footer">
Except where otherwise noted, the ROS wiki is licensed under the <br /><a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0</a> | <a href="https://plus.google.com/113789706402978299308" rel="publisher">Find us on Google+</a>
<hr style="margin-top: 10px;">
<div class="row">
  <div class="col-md-4 col-md-offset-4">
<a href="http://www.osrfoundation.org"><img style="margin-top: -1px;" src="/custom/images/brought_by_horiz.png"></p></a>
  </div>
</div>
</div>

  </div></div> <!-- /#dpage-inner, /#dpage -->


</body>
</html>

Ì¢V      YýùYýù>`´¼       M    :http://wiki.ros.org/rosbag/Tutorials/Recording%20and%20playing%20back%20data necko:classified 1 request-method GET request-Cookie Bl+in+j9eFy4GB+3/Ao5ugo66Rk= request-User-Agent Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:47.0) Gecko/20100101 Firefox/47.0 request-Accept-Language en-US,en;q=0.5 response-head HTTP/1.1 200 OK
Date: Sat, 04 Nov 2017 17:29:55 GMT
Server: Apache
Vary: Cookie,User-Agent,Accept-Language
Content-Length: 42656
Content-Type: text/html; charset=utf-8
 charset UTF-8 uncompressed-len 0 predictor::resource-count 15 predictor::http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css 1,1,1509816595,0 predictor::http://code.jquery.com/jquery-1.11.0.min.js 1,1,1509816595,0 predictor::http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js 1,1,1509816595,0 predictor::http://wiki.ros.org/custom/js/sorttable.js 1,1,1509816595,0 predictor::http://wiki.ros.org/custom/libraries/jquery.min.js 1,1,1509816595,0 predictor::http://wiki.ros.org/custom/js/seesaw.js 1,1,1509816595,0 predictor::http://wiki.ros.org/custom/js/rosversion.js 1,1,1509816595,0 predictor::http://wiki.ros.org/moin_static197/common/js/common.js 1,1,1509816595,0 predictor::http://wiki.ros.org/moin_static197/rostheme/css/common.css 1,1,1509816595,0 predictor::http://wiki.ros.org/moin_static197/rostheme/css/screen.css 1,1,1509816595,0 predictor::http://wiki.ros.org/moin_static197/rostheme/css/print.css 1,1,1509816595,0 predictor::http://wiki.ros.org/moin_static197/rostheme/css/projection.css 1,1,1509816595,0 predictor::http://www.google-analytics.com/ga.js 1,1,1509816595,0 predictor::http://wiki.ros.org/moin_static197/rostheme/img/idea.png 1,1,1509816595,0 predictor::https://js-agent.newrelic.com/nr-1044.min.js 1,1,1509816595,0   ¦ 